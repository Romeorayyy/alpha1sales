{"ast":null,"code":"import _objectSpread from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{PRODUCTS}from\"../products\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ShopContext=/*#__PURE__*/createContext(null);export var ShopContextProvider=function ShopContextProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var getTotalCartAmount=function getTotalCartAmount(){return Object.values(cartItems).reduce(function(total,_ref2){var quantity=_ref2.quantity,option=_ref2.option;return total+option.price*quantity;},0);};var addToCart=function addToCart(productId,selectedOption){var quantity=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;setCartItems(function(prevCartItems){var updatedCartItems=_objectSpread({},prevCartItems);var productKey=\"\".concat(productId,\"_\").concat(selectedOption?selectedOption.name:\"default\");if(updatedCartItems[productKey]){updatedCartItems[productKey].quantity+=quantity;}else{updatedCartItems[productKey]={id:productId,optionName:selectedOption.name,// Add this line\noption:selectedOption,quantity:quantity};}return updatedCartItems;});};var removeFromCart=function removeFromCart(productId,selectedOption){setCartItems(function(prevCartItems){var updatedCartItems=_objectSpread({},prevCartItems);var productKey=\"\".concat(productId,\"_\").concat(selectedOption.name);if(updatedCartItems[productKey]){updatedCartItems[productKey].quantity-=1;if(updatedCartItems[productKey].quantity<=0){delete updatedCartItems[productKey];}}return updatedCartItems;});};var updateCartItemCount=function updateCartItemCount(newAmount,productId,selectedOption){setCartItems(function(prevCartItems){var updatedCartItems=_objectSpread({},prevCartItems);var productKey=\"\".concat(productId,\"_\").concat(selectedOption.name);if(newAmount<=0){delete updatedCartItems[productKey];}else{updatedCartItems[productKey].quantity=newAmount;}return updatedCartItems;});};var checkout=function checkout(){setCartItems({});};var incrementCartItem=function incrementCartItem(productId,selectedOption){addToCart(productId,selectedOption,1);};var contextValue={cartItems:cartItems,addToCart:addToCart,updateCartItemCount:updateCartItemCount,removeFromCart:removeFromCart,incrementCartItem:incrementCartItem,getTotalCartAmount:getTotalCartAmount,checkout:checkout};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:children});};","map":{"version":3,"names":["createContext","useState","PRODUCTS","ShopContext","ShopContextProvider","children","cartItems","setCartItems","getTotalCartAmount","Object","values","reduce","total","quantity","option","price","addToCart","productId","selectedOption","prevCartItems","updatedCartItems","productKey","name","id","optionName","removeFromCart","updateCartItemCount","newAmount","checkout","incrementCartItem","contextValue"],"sources":["/Users/randyyono/Desktop/ragid-shop/client/src/context/shop-context.jsx"],"sourcesContent":["import { createContext, useState } from \"react\";\nimport { PRODUCTS } from \"../products\";\n\nexport const ShopContext = createContext(null);\n\nexport const ShopContextProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState({});\n\n  const getTotalCartAmount = () =>\n    Object.values(cartItems).reduce(\n      (total, { quantity, option }) => total + option.price * quantity,\n      0\n    );\n\n    const addToCart = (productId, selectedOption, quantity = 1) => {\n      setCartItems((prevCartItems) => {\n        const updatedCartItems = { ...prevCartItems };\n        const productKey = `${productId}_${selectedOption ? selectedOption.name : \"default\"}`;\n    \n        if (updatedCartItems[productKey]) {\n          updatedCartItems[productKey].quantity += quantity;\n        } else {\n          updatedCartItems[productKey] = {\n            id: productId,\n            optionName: selectedOption.name, // Add this line\n            option: selectedOption,\n            quantity,\n          };\n        }\n    \n        return updatedCartItems;\n      });\n    };\n    \n\n  const removeFromCart = (productId, selectedOption) => {\n    setCartItems((prevCartItems) => {\n      const updatedCartItems = { ...prevCartItems };\n      const productKey = `${productId}_${selectedOption.name}`;\n\n      if (updatedCartItems[productKey]) {\n        updatedCartItems[productKey].quantity -= 1;\n        if (updatedCartItems[productKey].quantity <= 0) {\n          delete updatedCartItems[productKey];\n        }\n      }\n\n      return updatedCartItems;\n    });\n  };\n\n  const updateCartItemCount = (newAmount, productId, selectedOption) => {\n    setCartItems((prevCartItems) => {\n      const updatedCartItems = { ...prevCartItems };\n      const productKey = `${productId}_${selectedOption.name}`;\n\n      if (newAmount <= 0) {\n        delete updatedCartItems[productKey];\n      } else {\n        updatedCartItems[productKey].quantity = newAmount;\n      }\n\n      return updatedCartItems;\n    });\n  };\n\n  const checkout = () => {\n    setCartItems({});\n  };\n\n  const incrementCartItem = (productId, selectedOption) => {\n    addToCart(productId, selectedOption, 1);\n  };\n\n  const contextValue = {\n    cartItems,\n    addToCart,\n    updateCartItemCount,\n    removeFromCart,\n    incrementCartItem,\n    getTotalCartAmount,\n    checkout,\n  };\n\n  return <ShopContext.Provider value={contextValue}>{children}</ShopContext.Provider>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}