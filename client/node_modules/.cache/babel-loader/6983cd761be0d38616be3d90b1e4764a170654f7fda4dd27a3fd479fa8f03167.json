{"ast":null,"code":"import _slicedToArray from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{ShopContext}from\"../../context/shop-context\";import{PRODUCTS}from\"../../products\";import styles from\"./ProductPage.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductPage=function ProductPage(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useContext=useContext(ShopContext),cartItems=_useContext.cartItems,addToCart=_useContext.addToCart,updateCartItemCount=_useContext.updateCartItemCount,removeFromCart=_useContext.removeFromCart,incrementCartItem=_useContext.incrementCartItem;var product=PRODUCTS.find(function(p){return p.id===Number(id);});var cartItemCount=cartItems[id]||{quantity:0,price:selectedOption.price};var _useState=useState(function(){if(product&&product.options){var defaultOption=product.options.find(function(option){return option.name===product.defaultOptionName;});return defaultOption||product.options[0];}return null;}),_useState2=_slicedToArray(_useState,2),selectedOption=_useState2[0],setSelectedOption=_useState2[1];if(!product)return/*#__PURE__*/_jsx(\"h2\",{children:\"Product not found.\"});var handleBuyNowClick=function handleBuyNowClick(){if(cartItems[id].quantity===0){addToCart(Number(id),selectedOption,1).then(function(){navigate(\"/cart\");});}else{navigate(\"/cart\");}};var handleOptionChange=function handleOptionChange(e){var optionIndex=e.target.value;setSelectedOption(product.options[optionIndex]);};var renderAdditionalInfo=function renderAdditionalInfo(){var additionalinfotitle1=product.additionalinfotitle1,additionalinfodescription1=product.additionalinfodescription1,additionalinfotitle2=product.additionalinfotitle2,additionalinfodescription2=product.additionalinfodescription2,additionalinfotitle3=product.additionalinfotitle3,additionalinfodescription3=product.additionalinfodescription3,additionalinfotitle4=product.additionalinfotitle4,additionalinfodescription4=product.additionalinfodescription4;return/*#__PURE__*/_jsxs(\"div\",{className:styles.additionalInfo,children:[additionalinfotitle1&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle1}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription1}})]}),additionalinfotitle2&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle2}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription2}})]}),additionalinfotitle3&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle3}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription3}})]}),additionalinfotitle4&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle4}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription4}})]})]});};return/*#__PURE__*/_jsx(\"div\",{className:styles.productPage,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.productCard,children:[/*#__PURE__*/_jsx(\"img\",{src:product.productImage,alt:product.productName}),/*#__PURE__*/_jsx(\"h3\",{children:product.productName}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:product.description}}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price:\"}),\" $\",selectedOption.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",selectedOption?selectedOption.price.toFixed(2):product.price.toFixed(2)]}),product.options&&/*#__PURE__*/_jsxs(\"div\",{className:styles.optionSelector,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"productOptions\",children:\"Choose an option:\"}),/*#__PURE__*/_jsx(\"select\",{name:\"productOptions\",id:\"productOptions\",value:selectedOption?product.options.indexOf(selectedOption):0,onChange:handleOptionChange,children:product.options.map(function(option,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:option.name},option.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.quantityControl,children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeFromCart(product.id);},children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:cartItems[product.id].quantity,onChange:function onChange(e){return updateCartItemCount(parseInt(e.target.value),product.id);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addToCart(product.id,selectedOption?selectedOption.price:null);},children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"addToCartBttn\",onClick:function onClick(){incrementCartItem(id,selectedOption);},children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.addToCartBttn,onClick:handleBuyNowClick,children:\"Buy Now\"})]}),renderAdditionalInfo()]})});};export default ProductPage;","map":{"version":3,"names":["React","useState","useContext","useParams","useNavigate","ShopContext","PRODUCTS","styles","ProductPage","id","navigate","cartItems","addToCart","updateCartItemCount","removeFromCart","incrementCartItem","product","find","p","Number","cartItemCount","quantity","price","selectedOption","options","defaultOption","option","name","defaultOptionName","setSelectedOption","handleBuyNowClick","then","handleOptionChange","e","optionIndex","target","value","renderAdditionalInfo","additionalinfotitle1","additionalinfodescription1","additionalinfotitle2","additionalinfodescription2","additionalinfotitle3","additionalinfodescription3","additionalinfotitle4","additionalinfodescription4","additionalInfo","__html","productPage","productCard","productImage","productName","description","toFixed","optionSelector","indexOf","map","index","quantityControl","parseInt","addToCartBttn"],"sources":["/Users/randyyono/Desktop/ragid-shop/client/src/pages/product/ProductPage.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { ShopContext } from \"../../context/shop-context\";\nimport { PRODUCTS } from \"../../products\";\nimport styles from \"./ProductPage.module.css\";\n\nconst ProductPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { cartItems, addToCart, updateCartItemCount, removeFromCart, incrementCartItem } = useContext(ShopContext);\n  const product = PRODUCTS.find((p) => p.id === Number(id));\n\n  const cartItemCount = cartItems[id] || { quantity: 0, price: selectedOption.price };\n\nconst [selectedOption, setSelectedOption] = useState(() => {\n  if (product && product.options) {\n    const defaultOption = product.options.find(option => option.name === product.defaultOptionName);\n    return defaultOption || product.options[0];\n  }\n  return null;\n});\n\n\n  if (!product) return <h2>Product not found.</h2>;\n\n  const handleBuyNowClick = () => {\n    if (cartItems[id].quantity === 0) {\n      addToCart(Number(id), selectedOption, 1).then(() => {\n        navigate(\"/cart\");\n      });\n    } else {\n      navigate(\"/cart\");\n    }\n  };\n  \n  \n   \n\n  const handleOptionChange = (e) => {\n    const optionIndex = e.target.value;\n    setSelectedOption(product.options[optionIndex]);\n  };\n\n  const renderAdditionalInfo = () => {\n    const { additionalinfotitle1, additionalinfodescription1, additionalinfotitle2, additionalinfodescription2, additionalinfotitle3, additionalinfodescription3, additionalinfotitle4, additionalinfodescription4 } = product;\n\n    return (\n      <div className={styles.additionalInfo}>\n        {additionalinfotitle1 && (\n          <div>\n            <h4>{additionalinfotitle1}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription1}}></div>\n          </div>\n        )}\n        {additionalinfotitle2 && (\n          <div>\n            <h4>{additionalinfotitle2}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription2}}></div>\n          </div>\n        )}\n        {additionalinfotitle3 && (\n          <div>\n            <h4>{additionalinfotitle3}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription3}}></div>\n          </div>\n        )}\n        {additionalinfotitle4 && (\n          <div>\n            <h4>{additionalinfotitle4}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription4}}></div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.productPage}>\n      <div className={styles.productCard}>\n        <img src={product.productImage} alt={product.productName} />\n        <h3>{product.productName}</h3>\n        <div dangerouslySetInnerHTML={{__html: product.description}}></div>\n        <p>\n        <b>Price:</b> ${selectedOption.price.toFixed(2)}</p>\n        <p>Price: ${selectedOption ? selectedOption.price.toFixed(2) : product.price.toFixed(2)}</p>\n        {product.options && (\n          <div className={styles.optionSelector}>\n            <label htmlFor=\"productOptions\">Choose an option:</label>\n            <select         name=\"productOptions\"\n          id=\"productOptions\"\n          value={selectedOption ? product.options.indexOf(selectedOption) : 0}\n          onChange={handleOptionChange}\n        >\n          {product.options.map((option, index) => (\n            <option key={option.name} value={index}>\n              {option.name}\n            </option>\n          ))}\n        </select>\n      </div>\n    )}\n    <div className={styles.quantityControl}>\n      <button onClick={() => removeFromCart(product.id)}>-</button>\n      <input \n        type=\"number\" \n        value={cartItems[product.id].quantity}\n        onChange={(e) => updateCartItemCount(parseInt(e.target.value), product.id)} />\n      <button onClick={() => addToCart(product.id, selectedOption ? selectedOption.price : null)}>+</button>\n    </div>\n    <div>\n      <button\n        className=\"addToCartBttn\"\n        onClick={() => {\n          incrementCartItem(id, selectedOption);\n        }}\n      >\n        Add to Cart\n      </button>\n      <button className={styles.addToCartBttn} onClick={handleBuyNowClick}>\n        Buy Now\n      </button>\n    </div>\n    {renderAdditionalInfo()}\n  </div>\n</div>\n);\n};\n\nexport default ProductPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}