{"ast":null,"code":"import _slicedToArray from\"/Users/randyyono/Desktop/new-raghid-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{ShopContext}from\"../../context/shop-context\";import{PRODUCTS}from\"../../products\";import styles from\"./ProductPage.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductPage=function ProductPage(){useEffect(function(){window.scrollTo(0,0);},[]);var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useContext=useContext(ShopContext),cartItems=_useContext.cartItems,addToCart=_useContext.addToCart,updateCartItemCount=_useContext.updateCartItemCount,removeFromCart=_useContext.removeFromCart,incrementCartItem=_useContext.incrementCartItem;var product=PRODUCTS.find(function(p){return p.id===Number(id);});var _useState=useState(function(){if(product&&product.options){var defaultOption=product.options.find(function(option){return option.name===product.defaultOptionName;});return defaultOption||product.options[0];}return null;}),_useState2=_slicedToArray(_useState,2),selectedOption=_useState2[0],setSelectedOption=_useState2[1];if(!product)return/*#__PURE__*/_jsx(\"h2\",{children:\"Product not found.\"});var handleBuyNowClick=function handleBuyNowClick(){if(!cartItems[\"\".concat(product.id,\"_\").concat(selectedOption.name)]){incrementCartItem(Number(id),selectedOption);}navigate(\"/cart\");};var handleOptionChange=function handleOptionChange(e){var optionName=e.target.value;setSelectedOption(product.options.find(function(option){return option.name===optionName;}));};var renderAdditionalInfo=function renderAdditionalInfo(){var additionalinfotitle1=product.additionalinfotitle1,additionalinfodescription1=product.additionalinfodescription1,additionalinfotitle2=product.additionalinfotitle2,additionalinfodescription2=product.additionalinfodescription2,additionalinfotitle3=product.additionalinfotitle3,additionalinfodescription3=product.additionalinfodescription3,additionalinfotitle4=product.additionalinfotitle4,additionalinfodescription4=product.additionalinfodescription4;return/*#__PURE__*/_jsxs(\"div\",{className:styles.additionalInfo,children:[additionalinfotitle1&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle1}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription1}})]}),additionalinfotitle2&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle2}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription2}})]}),additionalinfotitle3&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle3}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription3}})]}),additionalinfotitle4&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:additionalinfotitle4}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:additionalinfodescription4}})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.productPage,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.fixedImage,children:/*#__PURE__*/_jsx(\"img\",{src:product.productImage,alt:product.productName})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.productInfo,children:[/*#__PURE__*/_jsx(\"h3\",{children:product.productName}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:product.description}}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price:\"}),\" $\",selectedOption.price.toFixed(2)]}),product.options&&/*#__PURE__*/_jsxs(\"div\",{className:styles.optionSelector,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"productOptions\",children:\"Choose an option:\"}),/*#__PURE__*/_jsx(\"select\",{name:\"productOptions\",id:\"productOptions\",value:selectedOption?selectedOption.name:\"\",onChange:handleOptionChange,children:product.options.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option.name,children:option.name},option.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.quantityControl,children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeFromCart(product.id,selectedOption);},disabled:!cartItems[\"\".concat(product.id,\"_\").concat(selectedOption.name)],children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:cartItems[\"\".concat(product.id,\"_\").concat(selectedOption.name)]&&cartItems[\"\".concat(product.id,\"_\").concat(selectedOption.name)].quantity||0,onChange:function onChange(e){var newValue=parseInt(e.target.value);updateCartItemCount(newValue>=0?newValue:0,product.id,selectedOption);},readOnly:true}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addToCart(product.id,selectedOption);},children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:styles.addToCartBttn,onClick:function onClick(){incrementCartItem(product.id,selectedOption);},children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.addToCartBttn,onClick:handleBuyNowClick,children:\"Buy Now\"})]}),renderAdditionalInfo()]})]});};export default ProductPage;","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","ShopContext","PRODUCTS","styles","jsx","_jsx","jsxs","_jsxs","ProductPage","window","scrollTo","_useParams","id","navigate","_useContext","cartItems","addToCart","updateCartItemCount","removeFromCart","incrementCartItem","product","find","p","Number","_useState","options","defaultOption","option","name","defaultOptionName","_useState2","_slicedToArray","selectedOption","setSelectedOption","children","handleBuyNowClick","concat","handleOptionChange","e","optionName","target","value","renderAdditionalInfo","additionalinfotitle1","additionalinfodescription1","additionalinfotitle2","additionalinfodescription2","additionalinfotitle3","additionalinfodescription3","additionalinfotitle4","additionalinfodescription4","className","additionalInfo","dangerouslySetInnerHTML","__html","productPage","fixedImage","src","productImage","alt","productName","productInfo","description","price","toFixed","optionSelector","htmlFor","onChange","map","quantityControl","onClick","disabled","type","quantity","newValue","parseInt","readOnly","addToCartBttn"],"sources":["/Users/randyyono/Desktop/new-raghid-shop/client/src/pages/product/ProductPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { ShopContext } from \"../../context/shop-context\";\nimport { PRODUCTS } from \"../../products\";\nimport styles from \"./ProductPage.module.css\";\n\nconst ProductPage = () => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { cartItems, addToCart, updateCartItemCount, removeFromCart, incrementCartItem } = useContext(ShopContext);\n  const product = PRODUCTS.find((p) => p.id === Number(id));\n\n  const [selectedOption, setSelectedOption] = useState(() => {\n    if (product && product.options) {\n      const defaultOption = product.options.find(option => option.name === product.defaultOptionName);\n      return defaultOption || product.options[0];\n    }\n    return null;\n  });\n\n  if (!product) return <h2>Product not found.</h2>;\n\n  const handleBuyNowClick = () => {\n    if (!cartItems[`${product.id}_${selectedOption.name}`]) {\n      incrementCartItem(Number(id), selectedOption);\n    }\n    navigate(\"/cart\");\n  };\n  \n\n  const handleOptionChange = (e) => {\n    const optionName = e.target.value;\n    setSelectedOption(product.options.find((option) => option.name === optionName));\n  };  \n\n  const renderAdditionalInfo = () => {\n    const { additionalinfotitle1, additionalinfodescription1, additionalinfotitle2, additionalinfodescription2, additionalinfotitle3, additionalinfodescription3, additionalinfotitle4, additionalinfodescription4 } = product;\n\n    return (\n      <div className={styles.additionalInfo}>\n        {additionalinfotitle1 && (\n          <div>\n            <h4>{additionalinfotitle1}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription1}}></div>\n          </div>\n        )}\n        {additionalinfotitle2 && (\n          <div>\n            <h4>{additionalinfotitle2}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription2}}></div>\n          </div>\n        )}\n        {additionalinfotitle3 && (\n          <div>\n            <h4>{additionalinfotitle3}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription3}}></div>\n          </div>\n        )}\n        {additionalinfotitle4 && (\n          <div>\n            <h4>{additionalinfotitle4}</h4>\n            <div dangerouslySetInnerHTML={{__html: additionalinfodescription4}}></div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.productPage}>\n      <div className={styles.fixedImage}>\n        <img src={product.productImage} alt={product.productName} />\n      </div>\n      <div className={styles.productInfo}>\n        <h3>{product.productName}</h3>\n        <div dangerouslySetInnerHTML={{ __html: product.description }}></div>\n        <p>\n          <b>Price:</b> ${selectedOption.price.toFixed(2)}\n        </p>\n        {product.options && (\n          <div className={styles.optionSelector}>\n            <label htmlFor=\"productOptions\">Choose an option:</label>\n            <select\n              name=\"productOptions\"\n              id=\"productOptions\"\n              value={selectedOption ? selectedOption.name : \"\"}\n              onChange={handleOptionChange}\n            >\n              {product.options.map((option) => (\n                <option key={option.name} value={option.name}>\n                  {option.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        )}\n        <div className={styles.quantityControl}>\n          <button\n            onClick={() => removeFromCart(product.id, selectedOption)}\n            disabled={!cartItems[`${product.id}_${selectedOption.name}`]}\n          >\n            -\n          </button>\n          <input\n            type=\"number\"\n            value={\n              (cartItems[`${product.id}_${selectedOption.name}`] &&\n                cartItems[`${product.id}_${selectedOption.name}`].quantity) ||\n              0\n            }\n            onChange={(e) => {\n              const newValue = parseInt(e.target.value);\n              updateCartItemCount(\n                newValue >= 0 ? newValue : 0,\n                product.id,\n                selectedOption\n              );\n            }}\n            readOnly\n          />\n          <button onClick={() => addToCart(product.id, selectedOption)}>\n            +\n          </button>\n        </div>\n        <div>\n          <button\n            className={styles.addToCartBttn}\n            onClick={() => {\n              incrementCartItem(product.id, selectedOption);\n            }}\n          >\n            Add to Cart\n          </button>\n          <button className={styles.addToCartBttn} onClick={handleBuyNowClick}>\n            Buy Now\n          </button>\n        </div>\n        {renderAdditionalInfo()}\n      </div>\n    </div>\n  );\n}  \n\nexport default ProductPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}