{"ast":null,"code":"import _defineProperty from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{PRODUCTS}from\"../products\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ShopContext=/*#__PURE__*/createContext(null);var defaultCart=Object.fromEntries(PRODUCTS.map(function(product){var defaultOption=product.options.find(function(option){return option.name===product.defaultOptionName;});return[product.id,{quantity:0,price:defaultOption?defaultOption.price:product.price}];}));export var ShopContextProvider=function ShopContextProvider(_ref){var children=_ref.children;var _useState=useState(defaultCart),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var getTotalCartAmount=function getTotalCartAmount(){return Object.entries(cartItems).reduce(function(total,_ref2){var _ref3=_slicedToArray(_ref2,2),itemId=_ref3[0],_ref3$=_ref3[1],quantity=_ref3$.quantity,price=_ref3$.price;return total+PRODUCTS.find(function(product){return product.id===Number(itemId);}).price*quantity;},0);};var addToCart=function addToCart(itemId,selectedOption){var quantity=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var currentItem=cartItems[itemId];var price=selectedOption?selectedOption.price:currentItem.price;return new Promise(function(resolve){setCartItems(function(prev){var _prev$itemId;var newQuantity=(((_prev$itemId=prev[itemId])===null||_prev$itemId===void 0?void 0:_prev$itemId.quantity)||0)+quantity;var updatedCart=_objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:newQuantity,price:price}));resolve(updatedCart);return updatedCart;});});};var removeFromCart=function removeFromCart(itemId){setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:prev[itemId].quantity-1,price:prev[itemId].price}));});};var updateCartItemCount=function updateCartItemCount(newAmount,itemId){return setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:newAmount,price:prev[itemId].price}));});};var checkout=function checkout(){setCartItems(defaultCart);};var incrementCartItem=function incrementCartItem(itemId,selectedOption){setCartItems(function(prev){var currentItem=prev[itemId];var newQuantity=currentItem.quantity+1;var price=selectedOption?selectedOption.price:currentItem.price;return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:newQuantity,price:price}));});};var addToCartAndNavigate=function addToCartAndNavigate(itemId,selectedOption,navigate){var quantity=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;addToCart(itemId,selectedOption,quantity).then(function(){navigate(\"/cart\");});};var contextValue={cartItems:cartItems,addToCart:addToCart,updateCartItemCount:updateCartItemCount,removeFromCart:removeFromCart,incrementCartItem:incrementCartItem,getTotalCartAmount:getTotalCartAmount,checkout:checkout,addToCartAndNavigate:addToCartAndNavigate// Add this line\n};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:children});};","map":{"version":3,"names":["createContext","useState","PRODUCTS","ShopContext","defaultCart","Object","fromEntries","map","product","defaultOption","options","find","option","name","defaultOptionName","id","quantity","price","ShopContextProvider","children","cartItems","setCartItems","getTotalCartAmount","entries","reduce","total","itemId","Number","addToCart","selectedOption","currentItem","Promise","resolve","prev","newQuantity","updatedCart","removeFromCart","updateCartItemCount","newAmount","checkout","incrementCartItem","addToCartAndNavigate","navigate","then","contextValue"],"sources":["/Users/randyyono/Desktop/ragid-shop/client/src/context/shop-context.jsx"],"sourcesContent":["import { createContext, useState } from \"react\";\nimport { PRODUCTS } from \"../products\";\n\nexport const ShopContext = createContext(null);\n\nconst defaultCart = Object.fromEntries(PRODUCTS.map(product => {\n  const defaultOption = product.options.find(option => option.name === product.defaultOptionName);\n  return [product.id, { quantity: 0, price: defaultOption ? defaultOption.price : product.price }];\n}));\n\n\nexport const ShopContextProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState(defaultCart);\n\n  const getTotalCartAmount = () =>\n    Object.entries(cartItems).reduce(\n      (total, [itemId, {quantity, price}]) =>\n        total + PRODUCTS.find((product) => product.id === Number(itemId)).price * quantity,\n      0\n    );\n\n    const addToCart = (itemId, selectedOption, quantity = 1) => {\n      const currentItem = cartItems[itemId];\n      const price = selectedOption ? selectedOption.price : currentItem.price;\n      return new Promise((resolve) => {\n        setCartItems((prev) => {\n          const newQuantity = (prev[itemId]?.quantity || 0) + quantity;\n          const updatedCart = {\n            ...prev,\n            [itemId]: { quantity: newQuantity, price },\n          };\n          resolve(updatedCart);\n          return updatedCart;\n        });\n      });\n    };\n       \n         \n  const removeFromCart = (itemId) => {\n    setCartItems((prev) => ({ ...prev, [itemId]: {quantity: prev[itemId].quantity - 1, price: prev[itemId].price} }));\n  };\n\n  const updateCartItemCount = (newAmount, itemId) =>\n    setCartItems((prev) => ({ ...prev, [itemId]: {quantity: newAmount, price: prev[itemId].price} }));\n\n  const checkout = () => {\n    setCartItems(defaultCart);\n  };\n\n  const incrementCartItem = (itemId, selectedOption) => {\n    setCartItems((prev) => {\n      const currentItem = prev[itemId];\n      const newQuantity = currentItem.quantity + 1;\n      const price = selectedOption ? selectedOption.price : currentItem.price;\n  \n      return {\n        ...prev,\n        [itemId]: { quantity: newQuantity, price },\n      };\n    });\n  };\n\n  const addToCartAndNavigate = (itemId, selectedOption, navigate, quantity = 1) => {\n    addToCart(itemId, selectedOption, quantity).then(() => {\n      navigate(\"/cart\");\n    });\n  };\n  \n\n  const contextValue = {\n    cartItems,\n    addToCart,\n    updateCartItemCount,\n    removeFromCart,\n    incrementCartItem,\n    getTotalCartAmount,\n    checkout,\n    addToCartAndNavigate, // Add this line\n  };\n  \n  \n\n  return <ShopContext.Provider value={contextValue}>{children}</ShopContext.Provider>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}