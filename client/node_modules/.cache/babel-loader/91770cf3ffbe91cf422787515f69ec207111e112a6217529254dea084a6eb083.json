{"ast":null,"code":"import _objectSpread from\"/Users/randyyono/Desktop/new-raghid-shop/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/randyyono/Desktop/new-raghid-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{PRODUCTS}from\"../products\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ShopContext=/*#__PURE__*/createContext(null);export var ShopContextProvider=function ShopContextProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var getTotalCartAmount=function getTotalCartAmount(){return Object.values(cartItems).reduce(function(total,_ref2){var quantity=_ref2.quantity,option=_ref2.option;return total+option.price*quantity;},0);};var addToCart=function addToCart(productId,selectedOption){var quantity=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;setCartItems(function(prevCartItems){var updatedCartItems=_objectSpread({},prevCartItems);var productKey=\"\".concat(productId,\"_\").concat(selectedOption?selectedOption.name:\"default\");if(updatedCartItems[productKey]){updatedCartItems[productKey].quantity+=quantity;}else{updatedCartItems[productKey]={id:productId,optionName:selectedOption.name,option:selectedOption,quantity:quantity};}return updatedCartItems;});};var removeFromCart=function removeFromCart(productId,selectedOption){setCartItems(function(prevCartItems){var updatedCartItems=_objectSpread({},prevCartItems);var productKey=\"\".concat(productId,\"_\").concat(selectedOption.name);if(updatedCartItems[productKey]){updatedCartItems[productKey].quantity-=1;if(updatedCartItems[productKey].quantity<=0){delete updatedCartItems[productKey];}}return updatedCartItems;});};var updateCartItemCount=function updateCartItemCount(newAmount,productId,selectedOption){setCartItems(function(prevCartItems){var updatedCartItems=_objectSpread({},prevCartItems);var productKey=\"\".concat(productId,\"_\").concat(selectedOption.name);if(newAmount<=0){delete updatedCartItems[productKey];}else{updatedCartItems[productKey].quantity=newAmount;}return updatedCartItems;});};var checkout=function checkout(){setCartItems({});};var incrementCartItem=function incrementCartItem(productId,selectedOption){addToCart(productId,selectedOption,1);};var contextValue={cartItems:cartItems,addToCart:addToCart,updateCartItemCount:updateCartItemCount,removeFromCart:removeFromCart,incrementCartItem:incrementCartItem,getTotalCartAmount:getTotalCartAmount,checkout:checkout};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:children});};","map":{"version":3,"names":["createContext","useState","PRODUCTS","jsx","_jsx","ShopContext","ShopContextProvider","_ref","children","_useState","_useState2","_slicedToArray","cartItems","setCartItems","getTotalCartAmount","Object","values","reduce","total","_ref2","quantity","option","price","addToCart","productId","selectedOption","arguments","length","undefined","prevCartItems","updatedCartItems","_objectSpread","productKey","concat","name","id","optionName","removeFromCart","updateCartItemCount","newAmount","checkout","incrementCartItem","contextValue","Provider","value"],"sources":["/Users/randyyono/Desktop/new-raghid-shop/client/src/context/shop-context.jsx"],"sourcesContent":["import { createContext, useState } from \"react\";\nimport { PRODUCTS } from \"../products\";\n\nexport const ShopContext = createContext(null);\n\nexport const ShopContextProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState({});\n\n  const getTotalCartAmount = () =>\n    Object.values(cartItems).reduce(\n      (total, { quantity, option }) => total + option.price * quantity,\n      0\n    );\n\n  const addToCart = (productId, selectedOption, quantity = 1) => {\n    setCartItems((prevCartItems) => {\n      const updatedCartItems = { ...prevCartItems };\n      const productKey = `${productId}_${selectedOption ? selectedOption.name : \"default\"}`;\n\n      if (updatedCartItems[productKey]) {\n        updatedCartItems[productKey].quantity += quantity;\n      } else {\n        updatedCartItems[productKey] = {\n          id: productId,\n          optionName: selectedOption.name,\n          option: selectedOption,\n          quantity,\n        };\n      }\n\n      return updatedCartItems;\n    });\n  };\n\n  const removeFromCart = (productId, selectedOption) => {\n    setCartItems((prevCartItems) => {\n      const updatedCartItems = { ...prevCartItems };\n      const productKey = `${productId}_${selectedOption.name}`;\n\n      if (updatedCartItems[productKey]) {\n        updatedCartItems[productKey].quantity -= 1;\n        if (updatedCartItems[productKey].quantity <= 0) {\n          delete updatedCartItems[productKey];\n        }\n      }\n\n      return updatedCartItems;\n    });\n  };\n\n  const updateCartItemCount = (newAmount, productId, selectedOption) => {\n    setCartItems((prevCartItems) => {\n      const updatedCartItems = { ...prevCartItems };\n      const productKey = `${productId}_${selectedOption.name}`;\n\n      if (newAmount <= 0) {\n        delete updatedCartItems[productKey];\n      } else {\n        updatedCartItems[productKey].quantity = newAmount;\n      }\n\n      return updatedCartItems;\n    });\n  };\n\n  const checkout = () => {\n    setCartItems({});\n  };\n\n  const incrementCartItem = (productId, selectedOption) => {\n    addToCart(productId, selectedOption, 1);\n  };\n\n  const contextValue = {\n    cartItems,\n    addToCart,\n    updateCartItemCount,\n    removeFromCart,\n    incrementCartItem,\n    getTotalCartAmount,\n    checkout,\n  };\n\n  return <ShopContext.Provider value={contextValue}>{children}</ShopContext.Provider>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}