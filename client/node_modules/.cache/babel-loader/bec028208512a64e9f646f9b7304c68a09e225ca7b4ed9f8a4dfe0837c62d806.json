{"ast":null,"code":"import _defineProperty from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/randyyono/Desktop/ragid-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{PRODUCTS}from\"../products\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ShopContext=/*#__PURE__*/createContext(null);var defaultCart=Object.fromEntries(PRODUCTS.map(function(product){var defaultOption=product.options.find(function(option){return option.name===product.defaultOptionName;});return[product.id,{quantity:0,price:defaultOption?defaultOption.price:product.price}];}));export var ShopContextProvider=function ShopContextProvider(_ref){var children=_ref.children;var _useState=useState(defaultCart),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var getTotalCartAmount=function getTotalCartAmount(){return Object.entries(cartItems).reduce(function(total,_ref2){var _ref3=_slicedToArray(_ref2,2),itemId=_ref3[0],_ref3$=_ref3[1],quantity=_ref3$.quantity,price=_ref3$.price;return total+PRODUCTS.find(function(product){return product.id===Number(itemId);}).price*quantity;},0);};var addToCart=function addToCart(itemId,selectedOptionPrice){var currentItem=cartItems[itemId];// if (currentItem.quantity > 0) return;\nvar price=selectedOptionPrice||currentItem.price;setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:currentItem.quantity+1,price:price}));});};var removeFromCart=function removeFromCart(itemId){setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:prev[itemId].quantity-1,price:prev[itemId].price}));});};var updateCartItemCount=function updateCartItemCount(newAmount,itemId){return setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,{quantity:newAmount,price:prev[itemId].price}));});};var checkout=function checkout(){setCartItems(defaultCart);};var contextValue={cartItems:cartItems,addToCart:addToCart,updateCartItemCount:updateCartItemCount,removeFromCart:removeFromCart,getTotalCartAmount:getTotalCartAmount,checkout:checkout};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:children});};","map":{"version":3,"names":["createContext","useState","PRODUCTS","ShopContext","defaultCart","Object","fromEntries","map","product","defaultOption","options","find","option","name","defaultOptionName","id","quantity","price","ShopContextProvider","children","cartItems","setCartItems","getTotalCartAmount","entries","reduce","total","itemId","Number","addToCart","selectedOptionPrice","currentItem","prev","removeFromCart","updateCartItemCount","newAmount","checkout","contextValue"],"sources":["/Users/randyyono/Desktop/ragid-shop/client/src/context/shop-context.jsx"],"sourcesContent":["import { createContext, useState } from \"react\";\nimport { PRODUCTS } from \"../products\";\n\nexport const ShopContext = createContext(null);\n\nconst defaultCart = Object.fromEntries(PRODUCTS.map(product => {\n  const defaultOption = product.options.find(option => option.name === product.defaultOptionName);\n  return [product.id, { quantity: 0, price: defaultOption ? defaultOption.price : product.price }];\n}));\n\n\nexport const ShopContextProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState(defaultCart);\n\n  const getTotalCartAmount = () =>\n    Object.entries(cartItems).reduce(\n      (total, [itemId, {quantity, price}]) =>\n        total + PRODUCTS.find((product) => product.id === Number(itemId)).price * quantity,\n      0\n    );\n\n    const addToCart = (itemId, selectedOptionPrice) => {\n      const currentItem = cartItems[itemId];\n      // if (currentItem.quantity > 0) return;\n      const price = selectedOptionPrice || currentItem.price;\n      setCartItems((prev) => ({\n        ...prev,\n        [itemId]: { quantity: currentItem.quantity + 1, price },\n      }));\n    };\n     \n  const removeFromCart = (itemId) => {\n    setCartItems((prev) => ({ ...prev, [itemId]: {quantity: prev[itemId].quantity - 1, price: prev[itemId].price} }));\n  };\n\n  const updateCartItemCount = (newAmount, itemId) =>\n    setCartItems((prev) => ({ ...prev, [itemId]: {quantity: newAmount, price: prev[itemId].price} }));\n\n  const checkout = () => {\n    setCartItems(defaultCart);\n  };\n\n  const contextValue = {\n    cartItems,\n    addToCart,\n    updateCartItemCount,\n    removeFromCart,\n    getTotalCartAmount,\n    checkout,\n  };\n\n  return <ShopContext.Provider value={contextValue}>{children}</ShopContext.Provider>;\n};\n"],"mappings":"iYAAA,OAASA,aAAa,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,QAAQ,KAAQ,aAAa,CAAC,2CAEvC,MAAO,IAAMC,YAAW,cAAGH,aAAa,CAAC,IAAI,CAAC,CAE9C,GAAMI,YAAW,CAAGC,MAAM,CAACC,WAAW,CAACJ,QAAQ,CAACK,GAAG,CAAC,SAAAC,OAAO,CAAI,CAC7D,GAAMC,cAAa,CAAGD,OAAO,CAACE,OAAO,CAACC,IAAI,CAAC,SAAAC,MAAM,QAAIA,OAAM,CAACC,IAAI,GAAKL,OAAO,CAACM,iBAAiB,GAAC,CAC/F,MAAO,CAACN,OAAO,CAACO,EAAE,CAAE,CAAEC,QAAQ,CAAE,CAAC,CAAEC,KAAK,CAAER,aAAa,CAAGA,aAAa,CAACQ,KAAK,CAAGT,OAAO,CAACS,KAAM,CAAC,CAAC,CAClG,CAAC,CAAC,CAAC,CAGH,MAAO,IAAMC,oBAAmB,CAAG,QAAtBA,oBAAmB,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CAC5C,cAAkClB,QAAQ,CAACG,WAAW,CAAC,wCAAhDgB,SAAS,eAAEC,YAAY,eAE9B,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,SACtBjB,OAAM,CAACkB,OAAO,CAACH,SAAS,CAAC,CAACI,MAAM,CAC9B,SAACC,KAAK,0CAAGC,MAAM,0BAAGV,QAAQ,QAARA,QAAQ,CAAEC,KAAK,QAALA,KAAK,OAC/BQ,MAAK,CAAGvB,QAAQ,CAACS,IAAI,CAAC,SAACH,OAAO,QAAKA,QAAO,CAACO,EAAE,GAAKY,MAAM,CAACD,MAAM,CAAC,GAAC,CAACT,KAAK,CAAGD,QAAQ,GACpF,CAAC,CACF,GAED,GAAMY,UAAS,CAAG,QAAZA,UAAS,CAAIF,MAAM,CAAEG,mBAAmB,CAAK,CACjD,GAAMC,YAAW,CAAGV,SAAS,CAACM,MAAM,CAAC,CACrC;AACA,GAAMT,MAAK,CAAGY,mBAAmB,EAAIC,WAAW,CAACb,KAAK,CACtDI,YAAY,CAAC,SAACU,IAAI,wCACbA,IAAI,wBACNL,MAAM,CAAG,CAAEV,QAAQ,CAAEc,WAAW,CAACd,QAAQ,CAAG,CAAC,CAAEC,KAAK,CAALA,KAAM,CAAC,IACvD,CAAC,CACL,CAAC,CAEH,GAAMe,eAAc,CAAG,QAAjBA,eAAc,CAAIN,MAAM,CAAK,CACjCL,YAAY,CAAC,SAACU,IAAI,wCAAWA,IAAI,wBAAGL,MAAM,CAAG,CAACV,QAAQ,CAAEe,IAAI,CAACL,MAAM,CAAC,CAACV,QAAQ,CAAG,CAAC,CAAEC,KAAK,CAAEc,IAAI,CAACL,MAAM,CAAC,CAACT,KAAK,CAAC,IAAG,CAAC,CACnH,CAAC,CAED,GAAMgB,oBAAmB,CAAG,QAAtBA,oBAAmB,CAAIC,SAAS,CAAER,MAAM,QAC5CL,aAAY,CAAC,SAACU,IAAI,wCAAWA,IAAI,wBAAGL,MAAM,CAAG,CAACV,QAAQ,CAAEkB,SAAS,CAAEjB,KAAK,CAAEc,IAAI,CAACL,MAAM,CAAC,CAACT,KAAK,CAAC,IAAG,CAAC,GAEnG,GAAMkB,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrBd,YAAY,CAACjB,WAAW,CAAC,CAC3B,CAAC,CAED,GAAMgC,aAAY,CAAG,CACnBhB,SAAS,CAATA,SAAS,CACTQ,SAAS,CAATA,SAAS,CACTK,mBAAmB,CAAnBA,mBAAmB,CACnBD,cAAc,CAAdA,cAAc,CACdV,kBAAkB,CAAlBA,kBAAkB,CAClBa,QAAQ,CAARA,QACF,CAAC,CAED,mBAAO,KAAC,WAAW,CAAC,QAAQ,EAAC,KAAK,CAAEC,YAAa,UAAEjB,QAAQ,EAAwB,CACrF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}